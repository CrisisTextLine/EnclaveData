---

# - name: fix pip
#   shell: "sed -i 's/MARKER_EXPR()/MARKER_EXPR/g' /usr/lib/python2.7/site-packages/packaging/requirements.py"

- include: analysis-deps.yml

- name: create notebooks directory
  file:
    state: directory
    dest: "/home/{{researcher}}/notebooks"
    owner: "{{researcher}}"
    group: "{{researcher}}"

- name: create default notebook profile
  sudo: yes
  file:
    owner: "{{researcher}}"
    group: "{{researcher}}"
    state: directory
    recurse: yes
    dest: /home/{{researcher}}/.ipython/profile_default

- name: configure default notebook
  sudo: yes
  template:
    owner: "{{researcher}}"
    group: "{{researcher}}"
    src: ipynb_conf.py.j2
    dest: /home/{{researcher}}/.ipython/profile_default/ipython_notebook_config.py
#  notify: restart ipython-notebook
